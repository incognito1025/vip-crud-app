# Command-line CRUD Application

Build a VIP app. This app should allow a user to:

- Add a new name to a guest list
  - each guest should have
    - `id` - unique, generated by `nanoid`.
    - `name`- a string
    - `vip`- a boolean whether the person is VIP. By default, everyone's VIP status is false
- Show a list of names on the guest list
- Delete a name from the guest list
- Update a name to have VIP status (vip: true)
- Show the total number of people who are VIP

## Lesson Objectives

By the end of this lesson

- Develop a list of minimal features
- Create an app that uses user input to
- Create data
- Read data
- Delete data
- Update data

## Guiding Questions

- What are the minimum features for this app?
- Can you define these features using the "A user can..." pattern?

- What are the scripts you need to write?
- How can you control which action is taken in your `run` function
- Should you use an if/else statement or a `switch` statement? Or still a different approach?

- Since you are using the command line, sometimes you might want to use `console.log()` for your own development, but sometimes you might want to use it to inform the user. How can you distinguish the two use cases in your code?

- To save the data to a file, which npm package or built-in module would you use?

- What happens if your guest list has four people named `Cameron` on it? How can you be sure you update/delete the correct one?
- What package can you use to generate a unique id for your project?
- Faker.js also had similar functionality. What is the reasoning for NOT installing Faker.js instead?
- Why is using ids necessary?

- How can you set a default value of `vip: false` for each new guest?

- When you run `npm run index`, you want the people with `vip:true` to have their names logged in a different color. What npm package could you use?
- What logic would you need to write to complete this feature?

- How can you delete someone from the guest list?
- Is it essential to inform the user that this action happened successfully?

- How can you update someone from the guest list?

- Write the functionality so that when someone runs `npm run vip` - it shows

```
x out of y people are VIPs for this event.
```

    Where x is the number of VIPs and y is the total number of people.








///////////////////////////////////
Sure, here's the project setup and structure in the specified format:

### Project Structure and Setup

```
vip-crud-app/
│
├── data/
│   └── guests.json
│
├── src/
│   ├── controllers/
│   │   └── guestController.js
│   ├── helpers/
│   │   └── fileHelper.js
│   └── index.js
│
├── .gitignore
├── package.json
└── README.md
```

### Setup Steps

1. **Project Initialization:**
   - Initialize a Node.js project with `npm init -y`.
   - Create necessary directories and files:

     ```sh
     mkdir vip-crud-app
     cd vip-crud-app
     touch .gitignore README.md
     npm install nanoid@4
     ```

     ```sh
     mkdir src
     mkdir src/controllers
     touch src/controllers/guestController.js
     mkdir src/helpers
     touch src/helpers/fileHelper.js
     touch src/index.js

     mkdir data
     touch data/guests.json
     ```

   - Setup `package.json` with appropriate scripts:
     ```json
     "scripts": {
       "index": "node src/index.js index",
       "create": "node src/index.js create",
       "show": "node src/index.js show",
       "update": "node src/index.js update",
       "destroy": "node src/index.js destroy",
       "vip": "node src/index.js vip"
     }
     ```

   - Setup `.gitignore` with appropriate details:
     ```plaintext
     # Node.js dependencies
     /node_modules

     # macOS specific files
     .DS_Store

     # Log files
     npm-debug.log*
     yarn-debug.log*
     yarn-error.log*

     # Environment variables
     .env

     # Data files
     /data/guests.json
     ```

   - Setup `.env` file with appropriate details:
     ```sh
     npm install dotenv
     touch .env

     # Example .env file
     # This is where you can put your environment variables
     # e.g., DATABASE_URL, API_KEY, etc.
     # For now, let's leave it empty
     ```

2. **File Contents and Directories/Dependencies:**

   - **`index.js`**: Main entry point handling CLI commands.
     ```javascript
     const { readJSONFile, writeJSONFile } = require("./helpers/fileHelper");
     const { create, index, show, destroy, edit, vipCount } = require("./controllers/guestController");

     const inform = console.log;

     function run() {
       const guests = readJSONFile("data", "guests.json");
       let writeToFile = false;
       let updatedGuests = [];
       const action = process.argv[2];
       const guestNameOrId = process.argv[3];

       switch (action) {
         case "index":
           inform(index(guests));
           break;
         case "create":
           updatedGuests = create(guests, guestNameOrId);
           writeToFile = true;
           break;
         case "show":
           inform(show(guests, guestNameOrId));
           break;
         case "update":
           updatedGuests = edit(guests, guestNameOrId);
           writeToFile = true;
           break;
         case "destroy":
           updatedGuests = destroy(guests, guestNameOrId);
           writeToFile = true;
           break;
         case "vip":
           inform(vipCount(guests));
           break;
         default:
           inform("There was an error.");
       }

       if (writeToFile) {
         writeJSONFile("data", "guests.json", updatedGuests);
       }
     }

     run();
     ```

   - **`fileHelper.js`**: Utility functions for reading and writing JSON files.
     ```javascript
     const { readFileSync, writeFileSync } = require("node:fs");

     function readJSONFile(path, fileName) {
       const collection = readFileSync(`${path}/${fileName}`, "utf8");
       return collection ? JSON.parse(collection) : [];
     }

     function writeJSONFile(path, fileName, data) {
       data = JSON.stringify(data, null, 2);
       return writeFileSync(`${path}/${fileName}`, data, { encoding: "utf-8" });
     }

     module.exports = {
       readJSONFile,
       writeJSONFile,
     };
     ```

   - **`guestController.js`**: Functions for CRUD operations for guests.
     ```javascript
     const { nanoid } = require("nanoid");

     const inform = console.log;

     function create(guests, guestName) {
       const guest = {
         id: nanoid(4),
         name: guestName,
         vip: false
       };
       guests.push(guest);
       return guests;
     }

     function index(guests) {
       return guests.map((guest) => guest.id + " " + guest.name + (guest.vip ? " (VIP)" : "")).join("\n");
     }

     function show(guests, guestId) {
       const guest = guests.find((guest) => guest.id === guestId);
       return guest ? `${guest.id} ${guest.name} ${guest.vip ? "(VIP)" : ""}` : "Guest not found";
     }

     function destroy(guests, guestId) {
       const index = guests.findIndex((guest) => guest.id === guestId);
       if (index > -1) {
         guests.splice(index, 1);
         inform("Guest successfully removed from the list");
         return guests;
       } else {
         inform("Guest not found. No action taken");
         return guests;
       }
     }

     function edit(guests, guestId) {
       const index = guests.findIndex((guest) => guest.id === guestId);
       if (index > -1) {
         guests[index].vip = true;
         inform("Guest successfully updated to VIP");
         return guests;
       } else {
         inform("Guest not found. No action taken");
         return guests;
       }
     }

     function vipCount(guests) {
       const vipGuests = guests.filter(guest => guest.vip).length;
       return `${vipGuests} out of ${guests.length} people are VIPs for this event.`;
     }

     module.exports = { create, destroy, edit, index, show, vipCount };
     ```

   - **`guests.json`**: Stores the guest list.
     ```json
     []
     ```

   - **`.gitignore`**: Specifies files and directories to be ignored by Git.
     ```plaintext
     # Node.js dependencies
     /node_modules

     # macOS specific files
     .DS_Store

     # Log files
     npm-debug.log*
     yarn-debug.log*
     yarn-error.log*

     # Environment variables
     .env

     # Data files
     /data/guests.json
     ```

   - **`package.json`**: Manages project dependencies and scripts.
     ```json
     {
       "name": "vip-crud-app",
       "version": "1.0.0",
       "description": "Command-line CRUD application for managing a VIP guest list",
       "main": "src/index.js",
       "scripts": {
         "index": "node src/index.js index",
         "create": "node src/index.js create",
         "show": "node src/index.js show",
         "update": "node src/index.js update",
         "destroy": "node src/index.js destroy",
         "vip": "node src/index.js vip"
       },
       "dependencies": {
         "nanoid": "^4.0.0",
         "dotenv": "^10.0.0"
       },
       "author": "Your Name",
       "license": "ISC"
     }
     ```

   - **`README.md`**: Describes the project and provides instructions.
     ```markdown
     # VIP CRUD App

     This is a command-line CRUD application for managing a VIP guest list.

     ## Features

     - Add a new name to the guest list
     - Show the list of names on the guest list
     - Delete a name from the guest list
     - Update a name to have VIP status
     - Show the total number of people who are VIP

     ## Setup

     ```sh
     npm install
     ```

     ## Usage

     ```sh
     npm run create <guestName>
     npm run index
     npm run show <guestId>
     npm run update <guestId>
     npm run destroy <guestId>
     npm run vip
     ```
     ```

This setup and structure should help you build and manage the VIP guest list application effectively.